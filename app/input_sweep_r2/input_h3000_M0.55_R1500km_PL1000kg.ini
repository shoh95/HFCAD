# HFCAD input file (INI-style)
#
# Edit values as needed. Units are indicated in the parameter names.
# Comments start with '#' or ';'.
#
# Syntax:
#   [section]
#   key = value
#
# Lists/tuples can be provided as comma-separated values.
#

[mission]
# Mission timeline in minutes (20 points; must match legacy arrays)
times_min = 0, 5, 15, 16, 23, 25, 70, 71, 100, 110, 112, 116, 118, 135, 135, 135, 140, 150, 160, 160

[flight]
h_cr_m = 3000
mach_cr = 0.55
h_takeoff_m = 0.0
mach_takeoff = 0.16

[fuel_cell_arch]
n_stacks_series = 1
n_stacks_parallel = 2
volt_req_v = 700.0

[fuel_cell_op]
oversizing = 0
beta = true # if true, automatically calculates 1.2/rho_cruise value, if false, 1.05, if float, uses that float value

[hybrid]
psi_takeoff = 0.25
psi_climb = 0.25
psi_cruise_charger = 0.0

[eff]
eta_converter = 0.97
eta_pdu = 0.98
eta_inverter = 0.97
eta_motor = 0.95
eta_prop = 0.83
eta_em = 0.9215

[densities]
rhofc_w_per_kg = 3000.0
rhopmad_w_per_kg = 15000.0
rhoem_w_per_kg = 7000.0

[p_w]
# Units: kW/kg
p_w_cruise_kw_per_kg = 0.065
p_w_takeoff_kw_per_kg = 0.100
p_w_climb_kw_per_kg = 0.100

[cooling]
dT_K = 60.0

[hydrogen]
rho_h2_kg_m3 = 70.0
eta_storage = 0.40
eta_vol = 0.50
coversize = 1.5
range_total_m = 1500000
h_to_m = 0.0
vv_mps = 8.0

[wing]
wing_loading_kg_per_m2 = 249.745
aspect_ratio = 9.0
t_c = 0.15
n_ult = 4.5
lc4_deg = 0.0
taper = 0.4

[fuselage]
dfus_m = 1.65
finerat_fus_nose = 0.60
finerat_fus_tail = 0.80
fnose = 1.0
ftail = 2.0
lseat_m = 0.5
npass = 9
nseat_abreast = 3
ldoor_m = 1.0
lht_ft = 22.0
legacy_kc_overwrite_bug = False

[weights]
oemmisc_base_kg = 0.0
payload_kg = 1000  # (4 passengers), min payload
rhobatt_kwh_per_kg = 0.30
battery_reserve_fraction = 0.25

[solver]
power_tol_w = 500.0
mtom_tol_kg = 1.0
max_outer_iter = 500
max_inner_iter = 100

mtom_solver = newton
newton_max_rel_step = 0.50
newton_min_step_kg = 0.1
newton_slope_eps = 1e-6

newton_relax_init = 1.0
newton_relax_min = 0.1
newton_relax_decrease = 0.5
newton_relax_increase = 1.2

newton_fp_relax = 1.0
newton_use_bracketing = true

[design]
initial_mtom_kg = 5000.0
initial_total_power_guess_w = 1000000.0

# ============================
# ADRpy constraint sizing (optional)
# ============================

[constraint_sizing]
# Turn on ADRpy coupling
enable = true

# 'min_combined_pw' (fast) or 'min_mtom' (trade scan + mass closure)
selection = min_mtom

# Wing-loading scan bounds (Pa). Only used for the selection methods.
ws_min_pa = 2000
ws_max_pa = 2500
ws_step_pa = 50

# Optional refinement passes (selection=min_mtom only)
ws_refine_passes = 5
ws_refine_span_fraction = 0.20

# Add a margin on P/W requirement (e.g., 0.10 = +10%)
pw_margin_fraction = 0.0

# ADRpy propulsion identifier (use 'electric' for FC/electric sizing)
propulsion_type = electric

# Map ADRpy constraints to HFCAD phases
# Options: take-off, climb, cruise, turn, servceil, combined
takeoff_constraint = take-off
climb_constraint = climb
cruise_constraint = cruise

# If true, the 'combined' curve is used for all three phases
use_combined_for_phases = true


# If true, reduces log output during selection=min_mtom scans
scan_quiet = false

# If true, writes constraint_sizing_trade.csv to the output folder
write_trade_csv = true


[constraint_brief]
# Defaults match the RIMP9 ADRpy notebook
rwyelevation_m = 0
groundrun_m = 800
stloadfactor = 1.5
turnalt_m = 3000
turnspeed_ktas = 160
climbalt_m = 0
climbspeed_kias = 120
climbrate_fpm = 1200
cruisealt_m = 3000
cruisespeed_ktas = 220
cruisethrustfact = 1.0
servceil_m = 5000
secclimbspd_kias = 140
vstallclean_kcas = 110

[constraint_performance]
# Defaults match the RIMP9 ADRpy notebook
cdto = 0.0414
clto = 0.95
clmax_to = 1.75
clmax_clean = 1.45
cdmin_clean = 0.0254
mu_r = 0.02
etaprop_takeoff = 0.70
etaprop_climb = 0.80
etaprop_cruise = 0.85
etaprop_turn = 0.85
etaprop_servceil = 0.80

[constraint_geometry]
# Defaults match the RIMP9 ADRpy notebook
sweep_le_deg = 2.0
sweep_mt_deg = 0.0
